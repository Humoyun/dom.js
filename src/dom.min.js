/**
 * DOM.js is a lightweight & fast cross browser library for
 * dom traversal and manipulation.
 *
 * @author Dawid Kraczowski <crac>
 * @license MIT
 */
!function(a,b,c){function d(a,b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}function f(a){return"string"==typeof a}function g(a){return"number"==typeof a&&isFinite(a)}function h(a){return"object"==typeof a}function i(a){return"function"==typeof a}function j(a){return a&&"object"==typeof a&&Object.getPrototypeOf(a)===Object.getPrototypeOf({})}function k(b){if(t.isNode(b)||t.isElement(b)||b===a)return!1;var d=j(b)||e(b)||"object"==typeof b&&null!==b&&b.length!==c;return d}function l(a){var b,c;if(!h(a)||null===a)return b=a;if(e(a)){b=[];for(var f=0,g=a.length;g>f;f++)b[f]=l(a[f]);return b}b=new a.constructor;for(c in a)a.hasOwnProperty(c)&&(b[c]=h(a[c])&&null!==a[c]?l(a[c]):a[c]);return b}function m(d,e){return"function"==typeof a.getComputedStyle?a.getComputedStyle(d)[e]:typeof b.currentStyle!==c?d.currentStyle[e]:d.style[e]}function n(a,b){if(e(a)||"object"==typeof a&&a.length!==c)for(var d=0,f=a.length;f>d;d++)b.apply(a[d],[a[d],d]);else if(j(a))for(var g in a)b.apply(a[g],[a[g],g])}function C(a){t.body=t.findByTagName("body")[0],t.head=t.findByTagName("head")[0];for(var b in B){var c=B[b];n(t.find(b),function(a){E(a,b,c)})}var d=new t.Event(a);z=d,n(x,function(a){a.call(null,d)})}function D(a){var b=new t.Event(a);A=b,n(y,function(a){a.call(null,b)})}function E(a,b,c){var d=l(c);d.hasOwnProperty("init")&&(d.selector=b,d.element=a,d._element=t.copy(a),d.destroy=function(){var b=this._domWidget;delete d.element,delete this._domWidget,d.hasOwnProperty("onDestroy")?d.onDestroy():null,t.replace(a,d._element),delete b},a._domWidget=d,d.init(a,t.data(a)))}var o=b.addEventListener?"addEventListener":"attachEvent",p=b.removeEventListener?"removeEventListener":"detachEvent",q=b.addEventListener?"":"on",t=(b.createEvent?"createEvent":"createEventObject",b.dispatchEvent?"dispatchEvent":"fireEvent",{}),u=function(a){return a},v=navigator.userAgent,w=new RegExp("Trident/([0-9]{1,}[.0-9]{0,})");null!=w.exec(v)&&(rv=parseFloat(RegExp.$1),4==rv&&(u=function(a){for(var b=/-([a-z0-9])/;b.test(a);a=a.replace(b,RegExp.$1.toUpperCase()));return a}));var x=[],y=[],z=!1,A=!1,B={};t.isElement=function(a){return"object"==typeof HTMLElement?a instanceof HTMLElement:a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},t.isNode=function(a){return"object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName},t.Event=function(a){var b=a;t.Event.prototype.stopPropagation=function(){b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},t.Event.prototype.preventDefault=function(){b.preventDefault?b.preventDefault():b.returnValue=!1},t.Event.prototype.event=function(){return b},this.target=b.target||b.srcElement,this.ctrlKey=b.ctrlKey,this.shiftKey=b.shiftKey,this.altKey=b.altKey,this.relativeY=b.layerY||b.offsetY,this.relativeX=b.layerX||b.offsetX,this.x=b.x||b.clientX,this.y=b.y||b.clientY},t.Event.ON_CLICK="click",t.Event.ON_DBLCLICK="dblclick",t.Event.ON_CONTEXTMENU="contextmenu",t.Event.ON_MOUSEDOWN="mousedown",t.Event.ON_MOUSEENTER="mouseenter",t.Event.ON_MOUSELEAVE="mouseleave",t.Event.OM_MOUSEMOVE="mousemove",t.Event.ON_MOUSEOVER="mouseover",t.Event.ON_MOUSEOUT="mouseout",t.Event.ON_MOUSEUP="mouseup",t.Event.ON_MOUSEMOVE="mousemove",t.Event.ON_KEYDOWN="keydown",t.Event.ON_KEYUP="keyup",t.Event.ON_KEYPRESS="keypress",t.Event.ON_SELECT="select",t.Event.ON_RESET="reset",t.Event.ON_FOCUS="focus",t.Event.ON_BLUR="blur",t.Event.ON_SUBMIT="submit",t.Event.ON_CHANGE="change",t.Event.ON_LOAD="load",t.Event.ON_UNLOAD="unload",t.Event.ON_RESIZE="resize",t.Event.ON_UNLOAD="unload",t.Event.ON_ERROR="error",t.Event.ON_SCROLL="scroll",t.Event.ON_DRAG="drag",t.Event.ON_DRAGSTART="dragstart",t.Event.ON_DRAGEND="dragend",t.Event.ON_DRAGENTER="dragenter",t.Event.ON_DRAGLEAVE="dragleave",t.Event.ON_DRAGOVER="dragover",t.Event.ON_DROP="drop",t.addListener=function(b,e,f){if(b===c)throw new Error("Parameter cannot be undefined");if(k(b))return n(b,function(a){t.addListener(a,e,f)}),t;if(!t.isNode(b)&&b!==a)throw new Error(b+" is not a DOMNode object");if(b._event=b._event||{},b._event[e]=b._event[e]||{keys:[],values:[]},-1!=d(b._event[e].keys,f))return t;b._event[e].keys.push(f);var g=function(a){var c=new t.Event(a);f.call(b,c)===!1&&a.stop()};return b._event[e].values.push(g),b[o](q+e,g),t},t.dispatch=function(a,d,e){if(a===c)throw new Error("Parameter cannot be undefined");if(k(a))return n(a,function(a){t.dispatch(a,d,e)}),t;if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");e||(e={});var i,f={type:d,view:e.view||a.ownerDocument.defaultView,detail:e.detail||1,screenX:e.screenX||0,screenY:e.screenY||0,clientX:e.clientX||0,clientY:e.clientY||0,button:e.button||0,ctrlKey:e.ctrlKey||!1,altKey:e.altKey||!1,shiftKey:e.shiftKey||!1,metaKey:e.metaKey||!1,bubbles:e.bubbles||!0,cancelable:e.cancelable||!0},g={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/},h="Event";for(var j in g)if(g[j].test(d)){h=j;break}if(b.createEvent)return i=a.ownerDocument.createEvent(h),"MouseEvents"==h?i.initMouseEvent(f.type,f.bubbles,f.cancelable,f.view,f.detail,f.screenX,f.screenY,f.clientX,f.clientY,f.ctrlKey,f.altKey,f.shiftKey,f.metaKey,0,null):i.initEvent(d,f.bubbles,f.cancelable),a.dispatchEvent(i),t;if(b.createEventObject){f.clientX=f.pointerX,f.clientY=f.pointerY,i=b.createEventObject();for(var l in f)i[l]=f[l];return a.fireEvent(q+d,i),t}},t.removeListener=function(b,e,f){if(b===c)throw new Error("Parameter cannot be undefined");if(k(b))return n(b,function(a){t.removeListener(a,e,f)}),t;if(!t.isNode(b)&&b!==a)throw new Error(b+" is not a DOMNode object");if(!b._event||!b._event[e])return!1;var g=d(b._event[e].keys,f);if(-1===g)return!1;var h=b._event[e].values[g];return b[p](q+e,h),delete b._event[e].values[g],delete b._event[e].keys[g],t},t.hasListener=function(b,c,e){if(!t.isNode(b)&&b!==a)throw new Error(b+" is not a DOMNode object");return b._event&&b._event[c]?-1!==d(b._event[c].keys,e):!1},t.onClick=function(a,b){return t.addListener(a,t.Event.ON_CLICK,b)},t.onDblClick=function(a,b){return t.addListener(a,t.Event.ON_DBLCLICK,b)},t.onMouseOver=function(a,b){return t.addListener(a,t.Event.ON_MOUSEOVER,b)},t.onMouseOut=function(a,b){return t.addListener(a,t.Event.ON_MOUSEOUT,b)},t.onMouseDown=function(a,b){return t.addListener(a,t.Event.ON_MOUSEDOWN,b)},t.onMouseUp=function(a,b){return t.addListener(a,t.Event.ON_MOUSEUP,b)},t.onMouseEnter=function(a,b){return t.addListener(a,t.Event.ON_MOUSEENTER,b)},t.onMouseLeave=function(a,b){return t.addListener(a,t.Event.ON_MOUSELEAVE,b)},t.onMouseMove=function(a,b){return t.addListener(a,t.Event.ON_MOUSEMOVE,b)},t.onDrag=function(a,b){return t.addListener(a,t.Event.ON_DRAG,b)},t.onDragStart=function(a,b){return t.addListener(a,t.Event.ON_DRAGSTART,b)},t.onDragEnd=function(a,b){return t.addListener(a,t.Event.ON_DRAGEND,b)},t.onFocus=function(a,b){return t.addListener(a,t.Event.ON_FOCUS,b)},t.onBlur=function(a,b){return t.addListener(a,t.Event.ON_BLUR,b)},t.onSelect=function(a,b){return t.addListener(a,t.Event.ON_SELECT,b)},t.onChange=function(a,b){return t.addListener(a,t.Event.ON_CHANGE,b)},t.onSubmit=function(a,b){return t.addListener(a,t.Event.ON_SUBMIT,b)},t.onReset=function(a,b){return t.addListener(a,t.Event.ON_RESET,b)},t.onLoad=function(a,b){return t.addListener(a,t.Event.ON_LOAD,b)},t.onScroll=function(a,b){return t.addListener(a,t.Event.ON_SCROLL,b)},t.onUnload=function(a,b){return t.addListener(a,t.Event.ON_UNLOAD,b)},t.onResize=function(a,b){return t.addListener(a,t.Event.ON_RESIZE,b)},t.onKeyDown=function(a,b){return t.addListener(a,t.Event.ON_KEYDOWN,b)},t.onKeyUp=function(a,b){return t.addListener(a,t.Event.ON_KEYUP,b)},t.onKeyPress=function(a,b){return t.addListener(a,t.Event.ON_KEYPRESS,b)},t.find=function(a,c){var d=[];return d=t.isNode(c)?c.querySelectorAll(a):b.querySelectorAll(a)},t.id=function(a){return b.getElementById(a)},t.findByTagName=function(a){return b.getElementsByTagName(a)},t.findByClass=function(a){return"."==a.substring(0,1)&&(a=a.substring(1)),b.getElementsByClassName?b.getElementsByClassName(a):b.querySelector&&b.querySelectorAll?b.querySelectorAll("."+a):void 0},t.parent=function(a){if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");return a.parentNode},t.children=function(a,b){if("boolean"==typeof b&&b)return a.childNodes;var c=[];if(f(b)){for(var d=0,e=a.childNodes.length;e>d;d++)a.childNodes[d].nodeName.toLowerCase()===b.toLowerCase()&&c.push(a.childNodes[d]);return c}for(var d in a.childNodes)1===a.childNodes[d].nodeType&&c.push(a.childNodes[d]);return c},t.next=function(a){if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");var b=a.nextSibling;return 1!=b.nodeType?t.next(b):b},t.previous=function(a){if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");var b=a.previousSibling;return 1!=b.nodeType?t.previous(b):b},t.attribute=function(a,b){if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");if("string"==typeof b){var d;return d="class"===b&&a.className!==c?a.className:"for"===b&&a.htmlFor!==c?a.htmlFor:"value"===b&&a.value!==c?a.value:a.getAttribute(b),""===d&&(d=null),d}if(e(b)){var d={};for(var f in b)d[b[f]]=t.attribute(a,b[f]);return d}if(j(b)){for(var f in b)null===b[f]?a.removeAttribute(f):a.setAttribute(f,b[f]);return b}return!1},t.css=function(a,b){if(k(a)&&j(b))return n(a,function(a){t.css(a,b)}),t;if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");if("string"==typeof b)return m(a,u(b));if(e(b)){var c={};for(var d in b)c[b[d]]=m(a,u(b[d]));return c}if(j(b)){for(var d in b)a.style[u(d)]=b[d];return b}return!1},t.getClass=function(a){if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");var b=t.attribute(a,"class");if(!b)return[];b=b.split(" ");var c=[];for(var d in b)""!==b[d]&&c.push(b[d]);return c},t.hasClass=function(a,b){if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");if(f(b))return d(t.getClass(a),b)>-1?!0:!1;if(e(b)){var c=t.getClass(a);for(var g in b)if(-1===d(b[g],c))return!1;return!0}return!1},t.addClass=function(a,b){if(a===c)throw new Error("Dom.addClass first parameter cannot be undefined");if(k(a))return n(a,function(a){t.addClass(a,b)}),t;if(!t.isNode(a))throw new Error(a+" is not a DOMNode object");if(e(b)){for(var f in b)t.addClass(a,b[f]);return t}var g=t.getClass(a);return-1===d(g,b)&&g.push(b),g=g.join(" "),t.attribute(a,{"class":g})},t.removeClass=function(a,b){if(a===c)throw new Error("Dom.removeClass first parameter cannot be undefined");if(k(a))return n(a,function(a){t.removeClass(a,b)}),t;if(!t.isNode(a))throw new Error("Dom.removeClass"+a+" is not a DOMNode object");if(!b)return t.attribute(a,{"class":null});var e=t.getClass(a),f=d(e,b);return-1!==f?(e.splice(f,1),t.attribute(a,{"class":e.join(" ")})):void 0},t.create=function(a){var c=b.createElement("tbody"),d=b.createDocumentFragment();t.html(c,a);for(var e=t.children(c),f=0,g=e.length;g>f;f++)t.append(d,e[f]);return d},t.copy=function(a){if(!t.isNode(a))throw new Error("Dom.copy"+a+" is not a DOMNode object");return a.cloneNode(!0)},t.html=function(a,b){if(!t.isNode(a))throw new Error("Dom.html"+a+" is not a DOMNode object");return f(b)?(a.innerHTML=b,b):a.innerHTML},t.text=function(a,b){if(!t.isNode(a))throw new Error("Dom.text "+a+" is not a DOMNode object");return f(b)?(a.innerText?a.innerText=b:a.textContent=b,b):a.innerText?a.innerText:a.textContent},t.template=function(a,b){var c=/\{\{.*?\}\}/gi;return a.replace(c,function(a,c,d){var e=a.replace("{{","").replace("}}","").trim().split(" "),h=e[0];return h&&b.hasOwnProperty(h)?i(b[h])?b[h].apply(d,e):f(b[h])||g(b[h])?b[h]:"":""})},t.append=function(a,b){if(!t.isNode(a))throw new Error("Dom.append "+a+" is not a DOMNode object");return f(b)&&(b=t.create(b)),a.appendChild(b),b},t.prepend=function(a,b){if(!t.isNode(a))throw new Error("Dom.prepend "+a+" is not a DOMNode object");return f(b)&&(b=t.create(b)),a.insertBefore(b,a.firstChild),b},t.after=function(a,b){if(!t.isNode(a))throw new Error("Dom.after "+a+" is not a DOMNode object");return f(b)&&(b=t.create(b)),a.parentNode.insertBefore(b,a.nextSibling),b},t.before=function(a,b){if(!t.isNode(a))throw new Error("Dom.before "+a+" is not a DOMNode object");return f(b)&&(b=t.create(b)),a.insertBefore(b,a),b},t.replace=function(a,b){if(!t.isNode(a))throw new Error("Dom.replace "+a+" is not a DOMNode object");return f(b)&&(b=t.create(b)),a.parentNode.replaceChild(b,a),b},t.remove=function(a){if(!t.isNode(a))throw new Error("Dom.remove "+a+" is not a DOMNode object");var b=a.parentNode;return b.removeChild(a)},t.data=function(a,b){if(!t.isNode(a))throw new Error("Dom.data "+a+" is not a DOMNode object");if(b===c){if(a.hasOwnProperty("dataset")){var d={};for(var g in a.dataset)d[g]=a.dataset[g];return d}for(var d={},g=0,h=a.attributes,i=h.length;i>g;g++){var k=h.item(g);"data-"===k.nodeName.substr(0,5)&&(d[k.nodeName.substr(5)]=k.nodeValue)}return d}if(f(b))return t.attribute(a,"data-"+b);if(e(b)){for(var d={},g=0,i=b.length;i>g;g++){var l=b[g];d[l]=t.attribute(a,"data-"+l)}return d}if(j(b)){var m={};for(var g in b){var n=b[g];m["data-"+g]=n}t.attribute(a,m)}},t.loaded=function(a){return A!==!1?(a.call(null,A),t):(y.push(a),t)},t.ready=function(a){return z!==!1?(a.call(null,z),t):(x.push(a),t)},t.extend=function(a,b){return z?(n(t.find(a),function(c){E(c,a,b)}),t):(B[a]=b,t)},t.widget=function(a){if(!t.isNode(a))throw new Error(a+" is not a DOMElement")},null!==a.onload&&y.push(a.onload),a.onload=D,"attachEvent"===o?b[o]("onreadystatechange",function(a){"complete"===b.readyState&&(b[p]("onreadystatechange",arguments.callee),C(a))}):b[o]("DOMContentLoaded",function(a){b[p]("DOMContentLoaded",arguments.callee,!1),C(a)},!1),a.Dom=t}(this,document);