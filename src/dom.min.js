/**
 * DOM.js is a lightweight & fast cross browser library for
 * dom traversal and manipulation.
 *
 * @author Dawid Kraczowski <crac>
 * @license MIT
 */
(function(e,t,n){function r(e,t){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(e,t)}for(var n=0,r=e.length;n<r;n++){if(e[n]===t){return n}}return-1}function i(e){return Object.prototype.toString.call(e)==="[object Array]"}function s(e){return typeof e==="string"}function o(e){return typeof e==="number"&&isFinite(e)}function u(e){return typeof e==="object"}function a(e){return typeof e==="function"}function f(e){return e&&typeof e==="object"&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}function l(t){if(w.isNode(t)||w.isElement(t)||t===e){return false}var r=f(t)||i(t)||typeof t==="object"&&t!==null&&t["length"]!==n;return r}function c(e){var t;var n;var r;if(!u(e)||e===null){t=e;return t}if(i(e)){t=[];for(var s=0,o=e.length;s<o;s++){t[s]=c(e[s])}return t}t=new e.constructor;for(n in e){if(!e.hasOwnProperty(n)){continue}if(u(e[n])&&e[n]!==null){t[n]=c(e[n])}else{t[n]=e[n]}}return t}function h(r,i){var s;if(typeof e.getComputedStyle==="function"){s=e.getComputedStyle(r)}else if(typeof t.currentStyle!==n){s=r.currentStyle}else{s=r.style}if(i){return s[i]}else{return s}}function p(e,t){if(i(e)||typeof e==="object"&&e["length"]!==n){for(var r=0,s=e.length;r<s;r++){t.apply(e[r],[e[r],r])}return}if(f(e)){for(var o in e){t.apply(e[o],[e[o],o])}}}function k(e){w.body=w.findByTagName("body")[0];w.head=w.findByTagName("head")[0];for(var t in C){var n=C[t];p(w.find(t),function(e){_factoryWidget(e,t,n)})}var r=new w.Event(e);T=r;p(S,function(e){e.call(null,r)})}function L(e){var t=new w.Event(e);N=t;p(x,function(e){e.call(null,t)})}var d=function(){var e,n=3,r=t.createElement("div"),i=r.getElementsByTagName("i");while(r.innerHTML="<!--[if gt IE "+ ++n+"]><i></i><![endif]-->",i[0]);return n>4?n:e}();var v=t.addEventListener?"addEventListener":"attachEvent";var m=t.removeEventListener?"removeEventListener":"detachEvent";var g=t.addEventListener?"":"on";var y=t.createEvent?"createEvent":"createEventObject";var b=t.dispatchEvent?"dispatchEvent":"fireEvent";var w={};var E=function(e){return e};if(d&&d<9){E=function(e){for(var t=/-([a-z0-9])/;t.test(e);e=e.replace(t,RegExp.$1.toUpperCase()));return e}}var S=[];var x=[];var T=false;var N=false;var C={};w.isElement=function(e){if(typeof HTMLElement==="object"){return e instanceof HTMLElement}return e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string"};w.isNode=function(e){if(typeof Node==="object"){return e instanceof Node}return e&&typeof e==="object"&&typeof e.nodeType==="number"&&typeof e.nodeName==="string"};w.Event=function(e){var t=e;w.Event.prototype.stopPropagation=function(){if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}};w.Event.prototype.preventDefault=function(){if(t.preventDefault){t.preventDefault()}else{t.returnValue=false}};w.Event.prototype.event=function(){return t};this.target=t.target||t.srcElement;this.ctrlKey=t.ctrlKey;this.shiftKey=t.shiftKey;this.altKey=t.altKey;this.layerY=t.layerY||t.offsetY;this.layerX=t.layerX||t.offsetX;this.x=t.x||t.clientX;this.y=t.y||t.clientY;this.keyCode=t.keyCode;if(d&d<9){this.button=t.button==1?w.Mouse.BUTTON_LEFT:t.button==4?w.Mouse.BUTTON_MIDDLE:w.Mouse.BUTTON_RIGHT}else if(t.hasOwnProperty("which")){this.button=t.which==1?w.Mouse.BUTTON_LEFT:t.which==2?w.Mouse.BUTTON_MIDDLE:w.Mouse.BUTTON_RIGHT}else{this.button=t.button}};w.Mouse={};w.Mouse.BUTTON_LEFT=0;w.Mouse.BUTTON_MIDDLE=1;w.Mouse.BUTTON_RIGHT=2;w.Event.ON_CLICK="click";w.Event.ON_DBLCLICK="dblclick";w.Event.ON_CONTEXTMENU="contextmenu";w.Event.ON_MOUSEDOWN="mousedown";w.Event.ON_MOUSEENTER="mouseenter";w.Event.ON_MOUSELEAVE="mouseleave";w.Event.OM_MOUSEMOVE="mousemove";w.Event.ON_MOUSEOVER="mouseover";w.Event.ON_MOUSEOUT="mouseout";w.Event.ON_MOUSEUP="mouseup";w.Event.ON_MOUSEMOVE="mousemove";w.Event.ON_KEYDOWN="keydown";w.Event.ON_KEYUP="keyup";w.Event.ON_KEYPRESS="keypress";w.Event.ON_SELECT="select";w.Event.ON_RESET="reset";w.Event.ON_FOCUS="focus";w.Event.ON_BLUR="blur";w.Event.ON_SUBMIT="submit";w.Event.ON_CHANGE="change";w.Event.ON_LOAD="load";w.Event.ON_UNLOAD="unload";w.Event.ON_RESIZE="resize";w.Event.ON_UNLOAD="unload";w.Event.ON_ERROR="error";w.Event.ON_SCROLL="scroll";w.Event.ON_DRAG="drag";w.Event.ON_DRAGSTART="dragstart";w.Event.ON_DRAGEND="dragend";w.Event.ON_DRAGENTER="dragenter";w.Event.ON_DRAGLEAVE="dragleave";w.Event.ON_DRAGOVER="dragover";w.Event.ON_DROP="drop";w.Event.ON_DOM_DRAGSTART="onDomDragStart";w.Event.ON_DOM_DRAGEND="onDomDragEnd";w.Event.ON_DOM_DRAGMOVE="onDomDragMove";w.Event.ON_DOM_DROP="onDomDrop";w.Event.ON_DOM_DRAGENTER="onDomDragEnter";w.Event.ON_DOM_DRAGLEAVE="onDomDragLeave";w.addListener=function(t,i,s){if(t===n){throw new Error("Parameter cannot be undefined")}if(l(t)){p(t,function(e,t){w.addListener(e,i,s)});return w}if(!w.isNode(t)&&t!==e){throw new Error(t+" is not a DOMNode object")}t._event=t._event||{};t._event[i]=t._event[i]||{keys:[],values:[]};if(r(t._event[i].keys,s)!=-1){return w}t._event[i].keys.push(s);var o=function(e){var n=new w.Event(e);if(s.call(t,n)===false){e.stop()}};t._event[i].values.push(o);t[v](g+i,o);return w};w.dispatch=function(e,r,i){if(e===n){throw new Error("Parameter cannot be undefined")}if(l(e)){p(e,function(e,t){w.dispatch(e,r,i)});return w}if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(!i){i={}}var s={type:r,view:i.view||e.ownerDocument.defaultView,detail:i.detail||1,screenX:i.screenX||0,screenY:i.screenY||0,clientX:i.clientX||0,clientY:i.clientY||0,button:i.button||0,ctrlKey:i.ctrlKey||false,altKey:i.altKey||false,shiftKey:i.shiftKey||false,metaKey:i.metaKey||false,bubbles:i.bubbles||true,cancelable:i.cancelable||true};var o={HTMLEvents:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,MouseEvents:/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/};var u="Event";var a;for(var f in o){if(o[f].test(r)){u=f;break}}if(t.createEvent){a=e.ownerDocument.createEvent(u);if(u=="MouseEvents"){a.initMouseEvent(s.type,s.bubbles,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,0,null)}else{a.initEvent(r,s.bubbles,s.cancelable)}e.dispatchEvent(a);return w}else if(t.createEventObject){s.clientX=s.pointerX;s.clientY=s.pointerY;a=t.createEventObject();for(var c in s){a[c]=s[c]}e.fireEvent(g+r,a);return w}};w.removeListener=function(t,i,s){if(t===n){throw new Error("Parameter cannot be undefined")}if(l(t)){p(t,function(e,t){w.removeListener(e,i,s)});return w}if(!w.isNode(t)&&t!==e){throw new Error(t+" is not a DOMNode object")}if(!t._event||!t._event[i]){return false}var o=r(t._event[i].keys,s);if(o===-1){return false}var u=t._event[i].values[o];t[m](g+i,u);delete t._event[i].values[o];delete t._event[i].keys[o];return w};w.hasListener=function(t,n,i){if(!w.isNode(t)&&t!==e){throw new Error(t+" is not a DOMNode object")}if(!t._event||!t._event[n]){return false}return r(t._event[n].keys,i)!==-1};w.onClick=function(e,t){return w.addListener(e,w.Event.ON_CLICK,t)};w.onDblClick=function(e,t){return w.addListener(e,w.Event.ON_DBLCLICK,t)};w.onMouseOver=function(e,t){return w.addListener(e,w.Event.ON_MOUSEOVER,t)};w.onMouseOut=function(e,t){return w.addListener(e,w.Event.ON_MOUSEOUT,t)};w.onMouseDown=function(e,t){return w.addListener(e,w.Event.ON_MOUSEDOWN,t)};w.onMouseUp=function(e,t){return w.addListener(e,w.Event.ON_MOUSEUP,t)};w.onMouseEnter=function(e,t){return w.addListener(e,w.Event.ON_MOUSEENTER,t)};w.onMouseLeave=function(e,t){return w.addListener(e,w.Event.ON_MOUSELEAVE,t)};w.onMouseMove=function(e,t){return w.addListener(e,w.Event.ON_MOUSEMOVE,t)};w.onDrag=function(e,t){return w.addListener(e,w.Event.ON_DRAG,t)};w.onDragStart=function(e,t){return w.addListener(e,w.Event.ON_DRAGSTART,t)};w.onDragEnd=function(e,t){return w.addListener(e,w.Event.ON_DRAGEND,t)};w.onFocus=function(e,t){return w.addListener(e,w.Event.ON_FOCUS,t)};w.onBlur=function(e,t){return w.addListener(e,w.Event.ON_BLUR,t)};w.onSelect=function(e,t){return w.addListener(e,w.Event.ON_SELECT,t)};w.onChange=function(e,t){return w.addListener(e,w.Event.ON_CHANGE,t)};w.onSubmit=function(e,t){return w.addListener(e,w.Event.ON_SUBMIT,t)};w.onReset=function(e,t){return w.addListener(e,w.Event.ON_RESET,t)};w.onLoad=function(e,t){return w.addListener(e,w.Event.ON_LOAD,t)};w.onScroll=function(e,t){return w.addListener(e,w.Event.ON_SCROLL,t)};w.onUnload=function(e,t){return w.addListener(e,w.Event.ON_UNLOAD,t)};w.onResize=function(e,t){return w.addListener(e,w.Event.ON_RESIZE,t)};w.onKeyDown=function(e,t){return w.addListener(e,w.Event.ON_KEYDOWN,t)};w.onKeyUp=function(e,t){return w.addListener(e,w.Event.ON_KEYUP,t)};w.onKeyPress=function(e,t){return w.addListener(e,w.Event.ON_KEYPRESS,t)};w.find=function(e,n){var r=[];if(w.isNode(n)){r=n.querySelectorAll(e)}else{r=t.querySelectorAll(e)}return r};w.id=function(e){return t.getElementById(e)};w.findByTagName=function(e){return t.getElementsByTagName(e)};w.findByClass=function(e){if(e.substring(0,1)=="."){e=e.substring(1)}if(t.getElementsByClassName){return t.getElementsByClassName(e)}if(t.querySelector&&t.querySelectorAll){return t.querySelectorAll("."+e)}};w.offset=function(e){if(!w.isElement(e)){return false}var t=e.getBoundingClientRect();var n={top:Math.round(t.top),right:Math.round(t.right),bottom:Math.round(t.bottom),left:Math.round(t.left),width:t.width?Math.round(t.width):Math.round(e.offsetWidth),height:t.height?Math.round(t.height):Math.round(e.offsetHeight)};if(n.width<=0){n.width=parseFloat(h(e,"width"))}if(n.height<=0){n.height=parseFloat(h(e,"height"))}return n};w.width=function(e){return w.offset(e).width};w.height=function(e){return w.offset(e).height};w.parent=function(e){if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}return e.parentNode};w.children=function(e,t){if(typeof t==="boolean"&&t){return e.childNodes}var n=[];if(s(t)){for(var r=0,i=e.childNodes.length;r<i;r++){if(e.childNodes[r].nodeName.toLowerCase()===t.toLowerCase()){n.push(e.childNodes[r])}}return n}for(var r in e.childNodes){if(e.childNodes[r].nodeType===1){n.push(e.childNodes[r])}}return n};w.next=function(e){if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}var t=e.nextSibling;if(t.nodeType!=1){return w.next(t)}return t};w.previous=function(e){if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}var t=e.previousSibling;if(t.nodeType!=1){return w.previous(t)}return t};w.attribute=function(e,t){if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(typeof t==="string"){var r;if(t==="class"&&e["className"]!==n){r=e.className}else if(t==="for"&&e["htmlFor"]!==n){r=e.htmlFor}else if(t==="value"&&e["value"]!==n){r=e.value}else{r=e.getAttribute(t)}if(r===""){r=null}return r}if(i(t)){var r={};for(var s in t){r[t[s]]=w.attribute(e,t[s])}return r}if(f(t)){for(var s in t){if(t[s]===null){e.removeAttribute(s)}else{e.setAttribute(s,t[s])}}return t}return false};w.css=function(e,t){if(l(e)&&f(t)){p(e,function(e){w.css(e,t)});return w}if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(typeof t==="string"){return h(e,E(t))}if(i(t)){var n={};for(var r in t){n[t[r]]=h(e,E(t[r]))}return n}if(f(t)){for(var r in t){e.style[E(r)]=t[r]}return t}return false};w.getClass=function(e){if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}var t=w.attribute(e,"class");if(!t){return[]}t=t.split(" ");var n=[];for(var r in t){if(t[r]===""){continue}n.push(t[r])}return n};w.hasClass=function(e,t){if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(s(t)){return r(w.getClass(e),t)>-1?true:false}else if(i(t)){var n=w.getClass(e);for(var o in t){if(r(t[o],n)===-1){return false}}return true}else{return false}return false};w.addClass=function(e,t){if(e===n){throw new Error("Dom.addClass first parameter cannot be undefined")}if(l(e)){p(e,function(e){w.addClass(e,t)});return w}if(!w.isNode(e)){throw new Error(e+" is not a DOMNode object")}if(i(t)){for(var s in t){w.addClass(e,t[s])}return w}var o=w.getClass(e);if(r(o,t)===-1){o.push(t)}o=o.join(" ");return w.attribute(e,{"class":o})};w.removeClass=function(e,t){if(e===n){throw new Error("Dom.removeClass first parameter cannot be undefined")}if(l(e)){p(e,function(e){w.removeClass(e,t)});return w}if(!w.isNode(e)){throw new Error("Dom.removeClass"+e+" is not a DOMNode object")}if(!t){return w.attribute(e,{"class":null})}var i=w.getClass(e);var s=r(i,t);if(s===-1){return}i.splice(s,1);return w.attribute(e,{"class":i.join(" ")})};w.create=function(e){var n=t.createElement("tbody");var r=t.createDocumentFragment();w.html(n,e);var i=w.children(n);for(var s=0,o=i.length;s<o;s++){w.append(r,i[s])}return r};w.copy=function(e){if(!w.isNode(e)){throw new Error("Dom.copy"+e+" is not a DOMNode object")}return e.cloneNode(true)};w.html=function(e,t){if(!w.isNode(e)){throw new Error("Dom.html"+e+" is not a DOMNode object")}if(s(t)){e.innerHTML=t;return t}return e.innerHTML};w.text=function(e,t){if(!w.isNode(e)){throw new Error("Dom.text "+e+" is not a DOMNode object")}if(s(t)){if(e.innerText){e.innerText=t}else{e.textContent=t}return t}if(e.innerText){return e.innerText}return e.textContent};w.template=function(e,t){var n=/\{\{.*?\}\}/gi;return e.replace(n,function(n,r,i){var u=n.replace("{{","").replace("}}","").trim().split(" ");var f=u[0];if(!f||!t.hasOwnProperty(f)){return""}if(a(t[f])){return t[f].apply(i,u)}if(s(t[f])||o(t[f])){return t[f]}return""})};w.append=function(e,t){if(!w.isNode(e)){throw new Error("Dom.append "+e+" is not a DOMNode object")}if(s(t)){t=w.create(t)}e.appendChild(t);return t};w.prepend=function(e,t){if(!w.isNode(e)){throw new Error("Dom.prepend "+e+" is not a DOMNode object")}if(s(t)){t=w.create(t)}e.insertBefore(t,e.firstChild);return t};w.after=function(e,t){if(!w.isNode(e)){throw new Error("Dom.after "+e+" is not a DOMNode object")}if(s(t)){t=w.create(t)}e.parentNode.insertBefore(t,e.nextSibling);return t};w.before=function(e,t){if(!w.isNode(e)){throw new Error("Dom.before "+e+" is not a DOMNode object")}if(s(t)){t=w.create(t)}e.insertBefore(t,e);return t};w.replace=function(e,t){if(!w.isNode(e)){throw new Error("Dom.replace "+e+" is not a DOMNode object")}if(s(t)){t=w.create(t)}e.parentNode.replaceChild(t,e);return t};w.remove=function(e){if(!w.isNode(e)){throw new Error("Dom.remove "+e+" is not a DOMNode object")}var t=e.parentNode;return t.removeChild(e)};w.data=function(e,t){if(!w.isNode(e)){throw new Error("Dom.data "+e+" is not a DOMNode object")}if(t===n){if(e.hasOwnProperty("dataset")){var r={};for(var o in e.dataset){r[o]=e.dataset[o]}return r}else{var r={};for(var o=0,u=e.attributes,a=u.length;o<a;o++){var l=u.item(o);if(l.nodeName.substr(0,5)!=="data-"){continue}r[l.nodeName.substr(5)]=l.nodeValue}return r}}if(s(t)){return w.attribute(e,"data-"+t)}if(i(t)){var r={};for(var o=0,a=t.length;o<a;o++){var c=t[o];r[c]=w.attribute(e,"data-"+c)}return r}if(f(t)){var h={};for(var o in t){var p=t[o];h["data-"+o]=p}w.attribute(e,h)}};w.loaded=function(e){if(N!==false){e.call(null,N);return w}x.push(e);return w};w.ready=function(e){if(T!==false){e.call(null,T);return w}S.push(e);return w};if(e.onload!==null){x.push(e.onload)}e.onload=L;if(v==="attachEvent"){t[v]("onreadystatechange",function(e){if(t.readyState==="complete"){t[m]("onreadystatechange",arguments.callee);k(e)}})}else{t[v]("DOMContentLoaded",function(e){t[m]("DOMContentLoaded",arguments.callee,false);k(e)},false)}e.Dom=w})(this,document)